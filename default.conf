server {
    listen 443 ssl;
    server_name _;  # Change to your proxy server domain
    
    # SSL configuration for the proxy server
    ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;  # Path to your SSL certificate
    ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;  # Path to your SSL private key

    # location / {
    #     root /usr/share/nginx/html/static;
    #     index index.html;
    # }


    location / {
        # Proxy settings
        proxy_pass https://example.com/;  # Change to the external HTTPS server
        proxy_set_header Host example.com;  # Set the Host header to the external server
        proxy_set_header X-Real-IP $remote_addr;  # Forward the real client IP
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Forward the X-Forwarded-For header
        proxy_set_header X-Forwarded-Proto $scheme;  # Forward the original protocol
    
        # Rewrite URLs in the content
        sub_filter 'href="/' 'href="https://$host:8443/';  # Rewrite href attributes
        sub_filter 'src="/' 'src="http://$host:8443/';  # Rewrite src attributes
        sub_filter_once off;  # Apply the rewrite to all occurrences
    }
}
